# ============================================================================= 
# STL Shelf Docker Development Environment Configuration
# Copy this file to .env.docker and update the values as needed
# =============================================================================

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=development
PORT=3000

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=stlshelf
POSTGRES_USER=stlshelf
POSTGRES_PASSWORD=stlshelf_dev_password
DATABASE_URL=postgresql://stlshelf:stlshelf_dev_password@localhost:5432/stlshelf

# Connection pool settings
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_IDLE_TIMEOUT=10000
POSTGRES_CONNECTION_TIMEOUT=2000

# =============================================================================
# Redis Configuration  
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=stlshelf_redis_dev_password
REDIS_URL=redis://:stlshelf_redis_dev_password@localhost:6379

# Redis cache settings
REDIS_TTL_DEFAULT=3600
REDIS_TTL_MODEL_LIST=300
REDIS_TTL_MODEL_METADATA=1800
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# =============================================================================
# MinIO S3 Configuration
# =============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=stlshelf
MINIO_ROOT_PASSWORD=stlshelf_minio_dev_password
MINIO_ACCESS_KEY=stlshelf
MINIO_SECRET_KEY=stlshelf_minio_dev_password
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# S3/MinIO bucket settings
MINIO_BUCKET_NAME=stl-shelf-models
MINIO_BUCKET_THUMBNAILS=stl-shelf-thumbnails
MINIO_BUCKET_TEMP=stl-shelf-temp

# Upload settings
MAX_FILE_SIZE=100MB
ALLOWED_FILE_TYPES=.stl,.3mf,.obj,.gcode,.f3d
UPLOAD_TIMEOUT=300000

# =============================================================================
# Security & CORS Configuration
# =============================================================================
CORS_ORIGIN=http://localhost:3001
JWT_SECRET=your-super-secret-jwt-key-change-in-production
SESSION_SECRET=your-super-secret-session-key-change-in-production

# Rate limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_GIT_INTEGRATION=true
ENABLE_BACKGROUND_PROCESSING=true
ENABLE_THUMBNAILS=true
ENABLE_FILE_ANALYSIS=true
ENABLE_CACHE_WARMING=false

# =============================================================================
# Development & Debug Settings
# =============================================================================
DEBUG=stl-shelf:*
LOG_LEVEL=debug
ENABLE_REQUEST_LOGGING=true
ENABLE_QUERY_LOGGING=false

# Performance monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# Git Integration (Optional)
# =============================================================================
GIT_USER_NAME=STL Shelf Dev
GIT_USER_EMAIL=dev@stlshelf.local
GIT_REMOTE_URL=

# =============================================================================
# Background Processing
# =============================================================================
QUEUE_REDIS_URL=redis://:stlshelf_redis_dev_password@localhost:6379/1
WORKER_CONCURRENCY=4
JOB_ATTEMPTS=3
JOB_BACKOFF_TYPE=exponential

# =============================================================================
# File Processing
# =============================================================================
THUMBNAIL_SIZES=150,300,600
THUMBNAIL_QUALITY=85
THUMBNAIL_FORMAT=webp

# STL analysis settings
STL_ANALYSIS_TIMEOUT=30000
ENABLE_TRIANGLE_VALIDATION=true
ENABLE_VOLUME_CALCULATION=true

# 3MF metadata extraction
EXTRACT_PRINT_SETTINGS=true
EXTRACT_MATERIAL_INFO=true
EXTRACT_LAYER_INFO=true

# =============================================================================
# Docker Internal Networks (Don't modify unless you know what you're doing)
# =============================================================================
POSTGRES_HOST_INTERNAL=postgres
REDIS_HOST_INTERNAL=redis
MINIO_HOST_INTERNAL=minio