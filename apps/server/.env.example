# STL Shelf Server Configuration
# Copy this file to .env.local and update the values as needed

# =============================================================================
# Development/Production Mode
# =============================================================================
NODE_ENV=development

# =============================================================================
# Server Configuration
# =============================================================================
# Port for the API server (default: 3000)
PORT=3000

# =============================================================================
# Database (Postgres via Docker)
# =============================================================================
# Docker compose defaults: user=stlshelf, password=stlshelf_dev_password, db=stlshelf
DATABASE_URL=postgres://stlshelf:stlshelf_dev_password@localhost:5432/stlshelf
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_IDLE_TIMEOUT=30
POSTGRES_CONNECTION_TIMEOUT=5

# =============================================================================
# Redis Cache (via Docker)
# =============================================================================
# Redis URL format: redis://:password@host:port
REDIS_URL=redis://:stlshelf_redis_dev_password@localhost:6379
REDIS_TTL_DEFAULT=3600
REDIS_TTL_MODEL_LIST=300
REDIS_TTL_MODEL_METADATA=600

# =============================================================================
# Data Storage Configuration
# =============================================================================
# Directory where 3D models will be stored
# Development: ./data (relative to project root)
# Production: /data (absolute path)
DATA_DIR=./data

# S3/MinIO configuration (Bun S3Client)
# Access MinIO console at http://localhost:9001 (Docker)
# Buckets must exist before starting the server: stl-models, stl-thumbnails, stl-temp
STORAGE_REGION=us-east-1
STORAGE_ENDPOINT=localhost:9000
STORAGE_ACCESS_KEY=stlshelf
STORAGE_SECRET_KEY=stlshelf_minio_dev_password
STORAGE_BUCKET_NAME=stl-models
STORAGE_BUCKET_THUMBNAILS=stl-thumbnails
STORAGE_BUCKET_TEMP=stl-temp
STORAGE_USE_SSL=false

# =============================================================================
# BetterAuth Configuration
# =============================================================================
# Public URLs
AUTH_URL=http://localhost:3000
# In production AUTH_URL must use HTTPS
WEB_URL=http://localhost:3001

# Cookies
# In production behind Cloudflare, set a shared parent domain.
# Example: .example.com
# Leave empty for localhost
AUTH_COOKIE_DOMAIN=

# OAuth Providers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# =============================================================================
# Captcha (Cloudflare Turnstile)
# =============================================================================
# Turnstile is required in production when captcha is enabled on auth routes
# Public site key is used on the client; secret key stays on the server
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# =============================================================================
# Email (Resend)
# =============================================================================
# Resend API key for transactional emails
# Get your API key at https://resend.com/api-keys
# Use test key (re_test_...) for local dev - emails appear in Resend dashboard
# Use production key for deployed environments
RESEND_API_KEY=re_test_xxxxxxxxxxxxx
# Optional: Override the default from address
EMAIL_FROM=STL Shelf <noreply@mail.stl-shelf.com>
# Optional: Logo URL for email templates (leave empty to use text logo)
EMAIL_LOGO_URL=https://cdn.stl-shelf.com/logo-dark.svg

# =============================================================================
# Git Configuration (Required for version control)
# =============================================================================
# Git user information for model commits

# =============================================================================
# GitHub Integration (Optional - for remote backup/sync)
# =============================================================================
# GitHub repository URL with embedded Personal Access Token
# Format: https://YOUR_TOKEN@github.com/username/repository.git
#
# To create a Personal Access Token:
# 1. Go to GitHub → Settings → Developer settings → Personal access tokens
# 2. Click "Generate new token (classic)"
# 3. Select scope: "repo" (Full control of private repositories)
# 4. Copy the token and replace YOUR_TOKEN below
#

# =============================================================================
# Polar.sh Billing Configuration
# =============================================================================
# Access token from Polar Dashboard (Organization Settings → API)
POLAR_ACCESS_TOKEN=polar_...

# Webhook secret from Polar Dashboard (Organization Settings → Webhooks)
POLAR_WEBHOOK_SECRET=whsec_...

# Server environment: 'sandbox' for testing, 'production' for live
POLAR_SERVER=sandbox

# Product IDs from Polar Dashboard (created after setting up products)
# Leave empty initially, will be populated after Polar setup
POLAR_PRODUCT_FREE=
POLAR_PRODUCT_BASIC=
POLAR_PRODUCT_PRO=
